<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SENTINELA V12 - REAL AUTHORITY</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #020202; color: #f8fafc; }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.05); }
        .card-authority { border-top: 4px solid #3b82f6; transition: all 0.3s ease; }
        .card-authority:hover { border-top-width: 8px; transform: translateY(-4px); }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
        .bg-cyber { background-image: radial-gradient(circle at 2px 2px, #1e293b 1px, transparent 0); background-size: 40px 40px; }
        @media print { .no-print { display: none; } #report { display: block !important; color: black !important; } }
    </style>
</head>
<body class="bg-cyber min-h-screen">

    <div class="no-print p-6 lg:p-12 max-w-[1600px] mx-auto">
        <header class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-12 gap-6">
            <div class="flex items-center gap-6">
                <div class="w-16 h-16 bg-blue-600 rounded-3xl flex items-center justify-center shadow-[0_0_30px_rgba(37,99,235,0.4)]">
                    <span class="text-3xl font-black">S</span>
                </div>
                <div>
                    <h1 class="text-5xl font-black tracking-tighter italic">SENTINELA <span class="text-blue-500">V12</span></h1>
                    <p class="text-[10px] tracking-[0.5em] text-blue-400 font-bold uppercase">Sincronização Governamental & Bureau de Crédito</p>
                </div>
            </div>
            
            <div class="flex flex-wrap gap-4">
                <div class="glass px-6 py-3 rounded-2xl flex items-center gap-4">
                    <span class="text-[10px] font-black opacity-50 uppercase">Gateway Serpro</span>
                    <div id="serproStatus" class="flex items-center gap-2">
                        <div class="status-dot bg-red-500 animate-pulse"></div>
                        <span class="text-xs font-bold uppercase">Desconectado</span>
                    </div>
                </div>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            <div class="lg:col-span-12">
                <div class="glass p-10 rounded-[3rem] shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-8 opacity-10">
                        <svg width="100" height="100" viewBox="0 0 24 24" fill="white"><path d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.18l8 4v7.64l-8 4-8-4V8.18l8-4z"/></svg>
                    </div>
                    <label class="block text-center text-[10px] font-black text-slate-500 uppercase tracking-[0.4em] mb-8">Consulente Autorizado: Cristian</label>
                    <input type="text" id="docInput" placeholder="DIGITE CNPJ OU CPF PARA VARREDURA TOTAL" 
                           class="w-full bg-transparent text-center text-4xl lg:text-7xl font-black outline-none border-b-2 border-slate-800 focus:border-blue-600 transition-colors uppercase placeholder:text-slate-900">
                    
                    <div class="flex flex-wrap justify-center gap-6 mt-12">
                        <button onclick="totalScan()" class="bg-blue-600 hover:bg-blue-500 px-12 py-6 rounded-2xl font-black text-xl transition shadow-xl">EXECUTAR DEEP SCAN</button>
                        <button onclick="window.print()" class="bg-white text-black px-12 py-6 rounded-2xl font-black text-xl transition">LAUDO TÉCNICO</button>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-4 space-y-6">
                <div class="glass p-8 rounded-[2rem] card-authority">
                    <h3 class="text-blue-500 font-black text-xs uppercase mb-6 tracking-widest">Módulo Fiscal (GOV)</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center border-b border-white/5 pb-2">
                            <span class="text-sm opacity-60">Status SIMEI/SIMPLES:</span>
                            <span id="stSimei" class="font-bold">---</span>
                        </div>
                        <div class="flex justify-between items-center border-b border-white/5 pb-2">
                            <span class="text-sm opacity-60">Dívida Ativa (PGFN):</span>
                            <span id="stPgfn" class="font-bold text-red-500">---</span>
                        </div>
                        <div class="flex justify-between items-center border-b border-white/5 pb-2">
                            <span class="text-sm opacity-60">Mensagens e-CAC:</span>
                            <span id="stEcac" class="font-bold text-blue-400">---</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm opacity-60">Situação SEFAZ:</span>
                            <span id="stSefaz" class="font-bold">---</span>
                        </div>
                    </div>
                </div>
                
                <div class="glass p-8 rounded-[2rem] border-t-4 border-orange-500">
                    <h3 class="text-orange-500 font-black text-xs uppercase mb-6 tracking-widest">Pendências Financeiras</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-sm opacity-60">Score Serasa:</span>
                            <span id="stSerasa" class="font-black text-xl">---</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-sm opacity-60">Protestos (CENPROT):</span>
                            <span id="stProtesto" class="font-bold text-red-400">---</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-8">
                <div class="glass p-8 rounded-[2rem] border-t-4 border-emerald-500 h-full">
                    <h3 class="text-emerald-500 font-black text-xs uppercase mb-6 tracking-widest">Monitor de Contas & Boletos Abertos (DDA)</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-left text-sm">
                            <thead>
                                <tr class="opacity-40 border-b border-white/10 uppercase text-[10px] font-black">
                                    <th class="py-4">Origem</th>
                                    <th>Vencimento</th>
                                    <th>Valor</th>
                                    <th>Status Real</th>
                                </tr>
                            </thead>
                            <tbody id="boletoTable" class="font-medium">
                                <tr>
                                    <td colspan="4" class="py-10 text-center opacity-30 italic">Inicie a varredura para capturar boletos via Open Banking</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="report" class="hidden p-12 bg-white text-black font-serif">
        <h1 class="text-center text-2xl font-bold">RELATÓRIO DE VARREDURA INTEGRADA V12</h1>
        <hr class="my-6 border-black">
        <div id="printContent" class="space-y-4"></div>
    </div>

    <script>
        // CONFIGURAÇÃO DE HANDSHAKE COM O HARDWARE
        async function checkSerpro() {
            const status = document.getElementById('serproStatus');
            try {
                // Tenta conexão real com o Assinador Serpro na porta padrão
                const test = await fetch('https://127.0.0.1:6515/v1/status', { mode: 'no-cors' });
                status.innerHTML = `<div class="status-dot bg-emerald-500 shadow-[0_0_10px_#10b981]"></div><span class="text-xs font-bold uppercase text-emerald-500">Conectado</span>`;
            } catch (e) {
                console.log("Assinador não detectado localmente.");
            }
        }

        async function totalScan() {
            const doc = document.getElementById('docInput').value.replace(/\D/g, '');
            if(doc.length < 11) return alert("ERRO: Documento inválido para varredura governamental.");

            const btn = document.querySelector('button');
            btn.innerText = "SINCRO_PROCESS...";

            // LÓGICA DE INTEGRAÇÃO REAL (Simulando o tempo de resposta das APIs)
            // Em produção, aqui entram os fetch() para seus endpoints de API (Spedy, Serasa, etc)
            setTimeout(() => {
                // Resultados baseados no documento (Dados Reais exigem Tokens de API)
                document.getElementById('stSimei').innerText = "REGULAR / SEM PENDÊNCIAS";
                document.getElementById('stPgfn').innerText = "NADA CONSTA";
                document.getElementById('stEcac').innerText = "02 NOVAS MENSAGENS";
                document.getElementById('stSefaz').innerText = "HABILITADO";
                document.getElementById('stSerasa').innerText = "842";
                document.getElementById('stProtesto').innerText = "0 CONSTA";

                // Preenchimento da Tabela de Contas (Simulando DDA de Open Banking)
                const table = document.getElementById('boletoTable');
                table.innerHTML = `
                    <tr class="border-b border-white/5">
                        <td class="py-4 font-bold text-blue-400">ENEL DISTRIBUIÇÃO (LUZ)</td>
                        <td>15/01/2026</td>
                        <td>R$ 142,50</td>
                        <td><span class="bg-blue-900/40 text-blue-300 px-2 py-1 rounded text-[10px]">AGUARDANDO</span></td>
                    </tr>
                    <tr class="border-b border-white/5">
                        <td class="py-4 font-bold text-emerald-400">SABESP (ÁGUA)</td>
                        <td>10/01/2026</td>
                        <td>R$ 89,90</td>
                        <td><span class="bg-emerald-900/40 text-emerald-300 px-2 py-1 rounded text-[10px]">PAGO</span></td>
                    </tr>
                    <tr class="border-b border-white/5">
                        <td class="py-4 font-bold text-orange-400">VIVO FIBRA (INTERNET)</td>
                        <td>20/01/2026</td>
                        <td>R$ 119,90</td>
                        <td><span class="bg-orange-900/40 text-orange-300 px-2 py-1 rounded text-[10px]">EMITIDO</span></td>
                    </tr>
                `;

                btn.innerText = "DEEP SCAN CONCLUÍDO";
                btn.classList.replace('bg-blue-600', 'bg-emerald-600');
            }, 3000);
        }

        window.onload = checkSerpro;
    </script>
</body>
</html>
