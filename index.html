<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SENTINELA V12 - PDV E EMISSOR FISCAL</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: #f1f5f9; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        .thermal-font { font-family: 'Courier Prime', monospace; }
        
        /* Sistema de Impressão Dinâmico */
        @media print {
            .no-print { display: none !important; }
            #print-area { display: block !important; width: 100%; color: black !important; }
            body { background: white; }
        }

        #print-area { display: none; background: white; color: black; padding: 10px; }
        .btn-v12 { transition: all 0.2s; border-bottom: 4px solid rgba(0,0,0,0.3); }
        .btn-v12:active { transform: translateY(2px); border-bottom: 0; }
        
        /* Estilo da Nota Fiscal */
        .nf-box { border: 2px solid #000; padding: 15px; background: #fff; color: #000; }
    </style>
</head>
<body class="min-h-screen pb-20">

    <div class="no-print p-4 md:p-8 max-w-6xl mx-auto">
        <header class="flex justify-between items-center mb-8 border-b border-white/10 pb-6">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center font-black text-2xl rotate-3 shadow-lg shadow-blue-500/20">S</div>
                <div>
                    <h1 class="text-2xl font-black uppercase italic tracking-tighter">Sentinela <span class="text-blue-500">PDV V12</span></h1>
                    <p class="text-[9px] uppercase tracking-widest text-slate-500">Emissão Fiscal & Vendas Cristian</p>
                </div>
            </div>
            <div class="text-right">
                <p id="status-sefaz" class="text-[10px] font-black text-emerald-500 uppercase">● SEFAZ ONLINE</p>
                <p id="status-asaas" class="text-[10px] font-black text-blue-400 uppercase">● ASAAS INTEGRADO</p>
            </div>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-12 gap-8">
            
            <div class="lg:col-span-7 space-y-6">
                <div class="glass p-8 rounded-[2rem] border border-blue-500/20">
                    <h3 class="text-xs font-black text-blue-400 uppercase mb-6 italic tracking-widest">Dados do Cliente / Comprador</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="cliNome" placeholder="NOME COMPLETO / RAZÃO SOCIAL" class="bg-black/40 border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-blue-500 transition-all">
                        <input type="text" id="cliDoc" placeholder="CPF ou CNPJ (Automático)" class="bg-black/40 border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-blue-500 transition-all">
                        <input type="text" id="cliWhats" placeholder="WHATSAPP (EX: 551199999999)" class="bg-black/40 border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-blue-500 transition-all col-span-2">
                    </div>

                    <h3 class="text-xs font-black text-blue-400 uppercase mt-8 mb-6 italic tracking-widest">Detalhes do Produto / Serviço</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <input type="text" id="prodDesc" placeholder="DESCRIÇÃO DA VENDA" class="md:col-span-2 bg-black/40 border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-blue-500">
                        <input type="number" id="prodValor" placeholder="VALOR R$" class="bg-black/40 border border-white/10 p-4 rounded-xl text-sm outline-none focus:border-blue-500">
                    </div>
                </div>

                <div class="glass p-6 rounded-[2rem] flex flex-wrap gap-4 items-center justify-center">
                    <span class="text-[10px] font-bold text-slate-500 uppercase">Modo de Saída:</span>
                    <label class="flex items-center gap-2 text-xs font-bold cursor-pointer">
                        <input type="radio" name="printer" value="thermal" checked> Térmica (80mm)
                    </label>
                    <label class="flex items-center gap-2 text-xs font-bold cursor-pointer">
                        <input type="radio" name="printer" value="sticker"> Adesiva
                    </label>
                    <label class="flex items-center gap-2 text-xs font-bold cursor-pointer">
                        <input type="radio" name="printer" value="a4"> A4 / Nota Completa
                    </label>
                </div>
            </div>

            <div class="lg:col-span-5 space-y-6">
                <div class="glass p-8 rounded-[2rem] bg-gradient-to-br from-blue-600/10 to-transparent border-t-4 border-blue-500">
                    <h3 class="text-xs font-black text-white uppercase mb-6 italic tracking-widest text-center">Finalizar Operação</h3>
                    
                    <div class="space-y-3">
                        <button onclick="gerarDocumento('nf')" class="btn-v12 w-full bg-blue-600 hover:bg-blue-500 py-5 rounded-2xl font-black text-sm uppercase shadow-xl shadow-blue-900/40">Emitir Nota Fiscal (SEFAZ)</button>
                        <button onclick="gerarDocumento('rec')" class="btn-v12 w-full bg-emerald-600 hover:bg-emerald-500 py-5 rounded-2xl font-black text-sm uppercase shadow-xl shadow-emerald-900/40">Gerar Recibo Rápido</button>
                        <button onclick="enviarWhatsApp()" class="btn-v12 w-full bg-slate-100 text-black hover:bg-white py-5 rounded-2xl font-black text-sm uppercase">Enviar via WhatsApp</button>
                    </div>

                    <div class="mt-8 pt-8 border-t border-white/10">
                        <p class="text-[9px] text-slate-500 uppercase font-bold mb-2">Integração Radar de Leilões:</p>
                        <div class="bg-black/40 p-4 rounded-xl text-[10px] text-orange-400 font-mono italic">
                            Sincronizando lotes Receita Federal...
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="print-area">
        <div id="thermal-receipt" class="thermal-font">
            </div>
    </div>

    <script>
        // Lógica de Geração de Documentos
        function gerarDocumento(tipo) {
            const cliente = document.getElementById('cliNome').value;
            const doc = document.getElementById('cliDoc').value;
            const valor = document.getElementById('prodValor').value;
            const desc = document.getElementById('prodDesc').value;

            if(!cliente || !valor) return alert("Preencha os dados da venda primeiro.");

            const dataHora = new Date().toLocaleString();
            const nProtocolo = Math.floor(Math.random() * 900000000) + 100000000;
            const chaveAcesso = Array.from({length: 11}, () => Math.floor(Math.random()*9000)+1000).join(' ');

            let html = "";

            if(tipo === 'nf') {
                html = `
                    <div class="nf-box">
                        <div style="display:flex; justify-content:space-between; border-bottom:1px solid #000; padding-bottom:10px;">
                            <div style="font-size:12px; font-weight:900;">SENTINELA PDV V12<br>CRISTIAN INTEGRATION LTDA</div>
                            <div style="text-align:right; font-size:10px;"><b>DANFE NFC-e</b><br>Nº: 000.${nProtocolo}<br>Série: 12</div>
                        </div>
                        <div style="margin:10px 0; font-size:11px;">
                            <p><b>DESTINATÁRIO:</b> ${cliente}</p>
                            <p><b>CPF/CNPJ:</b> ${doc}</p>
                        </div>
                        <table style="width:100%; font-size:10px; border-collapse:collapse;">
                            <tr style="border-bottom:1px solid #000;">
                                <th align="left">ITEM</th><th align="right">QTD</th><th align="right">TOTAL</th>
                            </tr>
                            <tr>
                                <td>${desc}</td><td align="right">1.0</td><td align="right">R$ ${valor}</td>
                            </tr>
                        </table>
                        <div style="margin-top:20px; font-size:12px; font-weight:900; text-align:right;">
                            TOTAL: R$ ${valor}
                        </div>
                        <div style="font-size:8px; margin-top:20px; word-break:break-all; text-align:center;">
                            CHAVE DE ACESSO:<br>${chaveAcesso}<br><br>
                            <b>Protocolo de Autorização: ${Date.now()}</b>
                        </div>
                    </div>
                `;
            } else {
                html = `
                    <div class="thermal-font" style="text-align:center; width:80mm; font-size:12px;">
                        <p><b>*** COMPROVANTE DE PAGAMENTO ***</b></p>
                        <p>V12 SENTINELA PDV</p>
                        <hr>
                        <p align="left">DATA: ${dataHora}</p>
                        <p align="left">CLIENTE: ${cliente}</p>
                        <p align="left">DOC: ${doc}</p>
                        <hr>
                        <p align="left">DESC: ${desc}</p>
                        <p align="left" style="font-size:16px;"><b>TOTAL: R$ ${valor}</b></p>
                        <hr>
                        <p>Obrigado pela preferência!</p>
                        <p>Cristian System v12.0</p>
                    </div>
                `;
            }

            document.getElementById('thermal-receipt').innerHTML = html;
            
            // Chama API do ASAAS (Exemplo de Handshake)
            registrarNoAsaas(cliente, valor);
            
            window.print();
        }

        async function registrarNoAsaas(nome, valor) {
            console.log(`Integrando venda de R$ ${valor} para ${nome} no ASAAS...`);
            // Aqui entra o fetch real para sua API/Backend que fala com o Asaas
        }

        function enviarWhatsApp() {
            const numero = document.getElementById('cliWhats').value;
            const cliente = document.getElementById('cliNome').value;
            const valor = document.getElementById('prodValor').value;

            if(!numero) return alert("Insira o WhatsApp do cliente.");

            const msg = window.encodeURIComponent(`Olá ${cliente}, segue o link da sua Nota Fiscal / Recibo emitido pelo Sentinela V12 no valor de R$ ${valor}.`);
            window.open(`https://api.whatsapp.com/send?phone=${numero}&text=${msg}`);
        }
    </script>
</body>
</html>
