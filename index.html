<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>V12 | DEFENSE & FISCAL COMMAND CENTER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;700&family=Orbitron:wght@400;900&display=swap" rel="stylesheet">
    <style>
        :root { 
            --israel-blue: #0038b8; 
            --neon-cyan: #00f2ff;
            --defense-gray: #0a0b10;
        }
        body { 
            background-color: var(--defense-gray); 
            color: #d1d5db; 
            font-family: 'JetBrains Mono', monospace; 
            overflow-x: hidden;
        }
        .header-israel {
            background: linear-gradient(90deg, #0038b8 0%, #001a57 100%);
            border-bottom: 2px solid var(--neon-cyan);
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.3);
        }
        .panel-tactical {
            background: rgba(16, 20, 30, 0.8);
            border: 1px solid rgba(0, 242, 255, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
        }
        .panel-tactical::before {
            content: "SECURED UNIT";
            position: absolute; top: -10px; left: 20px;
            background: var(--israel-blue);
            color: white; font-size: 8px; padding: 2px 8px; font-weight: bold;
        }
        .input-israel {
            background: #05070a;
            border: 1px solid #1e293b;
            color: var(--neon-cyan);
            padding: 10px;
            font-size: 13px;
            transition: 0.3s;
        }
        .input-israel:focus {
            border-color: var(--neon-cyan);
            box-shadow: 0 0 10px rgba(0, 242, 255, 0.2);
            outline: none;
        }
        .glitch-text { font-family: 'Orbitron', sans-serif; letter-spacing: 2px; }
        
        /* Scanner Visual de Israel */
        .scanner-line {
            width: 100%; height: 2px;
            background: var(--neon-cyan);
            position: absolute;
            top: 0; opacity: 0.5;
            animation: scan 3s infinite linear;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        @media print { .no-print { display: none !important; } #print-area { display: block !important; background: white !important; } }
        #print-area { display: none; }
    </style>
</head>
<body class="p-4">

    <div class="fixed top-0 left-0 w-full h-full pointer-events-none opacity-[0.03] z-50 overflow-hidden">
        <div class="scanner-line"></div>
    </div>

    <div class="no-print max-w-7xl mx-auto space-y-6">
        <header class="header-israel p-4 rounded-t-xl flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 bg-white flex items-center justify-center rounded-sm">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Flag_of_Israel.svg/1200px-Flag_of_Israel.svg.png" class="h-8">
                </div>
                <div>
                    <h1 class="glitch-text text-2xl font-black text-white italic">SENTINELA <span class="text-cyan-400">V12</span></h1>
                    <p class="text-[8px] tracking-[0.6em] text-cyan-300 font-bold">MILITARY-GRADE FISCAL INTERFACE</p>
                </div>
            </div>
            
            <div class="flex gap-4 items-center font-bold">
                <div class="text-right">
                    <div id="hwStatus" class="text-[10px] text-red-500 flex items-center gap-2">
                        <span class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></span>
                        SERPRO HARDWARE: DISCONNECTED
                    </div>
                    <div class="text-[9px] text-slate-400">RSA-4096 / AES-256 ACTIVE</div>
                </div>
            </div>
        </header>

        <div class="grid grid-cols-12 gap-6">
            <div class="col-span-12 lg:col-span-8 space-y-4">
                <div class="panel-tactical p-6 rounded-xl">
                    <h2 class="text-xs font-black text-cyan-500 mb-6 flex items-center gap-2 uppercase">
                        <span class="w-4 h-[1px] bg-cyan-500"></span> Identificação do Alvo (Cliente)
                    </h2>
                    
                    <div class="grid grid-cols-6 gap-4">
                        <div class="col-span-3">
                            <label class="text-[10px] text-slate-500 block mb-1">CNPJ / CPF DO ADQUIRENTE</label>
                            <input type="text" id="cliDoc" class="input-israel w-full" placeholder="IDENTIFICANDO...">
                        </div>
                        <div class="col-span-3">
                            <label class="text-[10px] text-slate-500 block mb-1">VALOR BRUTO DA OPERAÇÃO</label>
                            <input type="number" id="prodValor" oninput="calc2026()" class="input-israel w-full text-lg font-bold" placeholder="0.00">
                        </div>
                        <div class="col-span-6">
                            <label class="text-[10px] text-slate-500 block mb-1">NOME COMPLETO / REGISTRO COMERCIAL</label>
                            <input type="text" id="cliNome" class="input-israel w-full" placeholder="...">
                        </div>
                        <div class="col-span-6">
                            <label class="text-[10px] text-slate-500 block mb-1">ENDEREÇO DE DESPACHO E FATURAÇÃO</label>
                            <input type="text" id="cliEnd" class="input-israel w-full" placeholder="...">
                        </div>
                    </div>
                </div>

                <div class="bg-black/80 p-4 border border-cyan-900/50 rounded-lg">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-[10px] font-black text-cyan-700">LIVE SECURITY FEED</span>
                        <span class="text-[9px] text-slate-600">V12_CORE_SYSTEM</span>
                    </div>
                    <div id="terminal" class="h-32 overflow-y-auto text-[11px] text-cyan-400/80 leading-relaxed font-mono">
                        [SYSTEM] Initializing Sentinela V12 Encryption...<br>
                        [AUTH] Waiting for RSA Handshake (SERPRO/IOB)...<br>
                        [INFO] Tax Reform 2026 Engine Loaded.<br>
                    </div>
                </div>
            </div>

            <div class="col-span-12 lg:col-span-4 space-y-4">
                <div class="panel-tactical p-6 rounded-xl border-t-4 border-cyan-500">
                    <h3 class="text-center text-[11px] font-black uppercase mb-6 text-white tracking-widest">Calculadora Reforma 2026</h3>
                    
                    <div class="space-y-4 text-xs font-bold">
                        <div class="flex justify-between text-slate-400">
                            <span>CBS (FEDERAL):</span>
                            <span id="cbsVal" class="text-white">R$ 0,00</span>
                        </div>
                        <div class="flex justify-between text-slate-400">
                            <span>IBS (EST/MUN):</span>
                            <span id="ibsVal" class="text-white">R$ 0,00</span>
                        </div>
                        <div class="flex justify-between text-slate-400">
                            <span>IS (SELETIVO):</span>
                            <span class="text-orange-500">EXEMPT</span>
                        </div>
                        <div class="border-t border-cyan-900/50 pt-4 flex justify-between items-center">
                            <span class="text-cyan-500">NET VALUE:</span>
                            <span id="liqVal" class="text-2xl text-cyan-400 font-black">R$ 0,00</span>
                        </div>
                    </div>
                </div>

                <div class="space-y-3">
                    <button onclick="gerar('A4')" class="w-full bg-cyan-600 hover:bg-cyan-400 text-black font-black py-4 rounded uppercase text-xs tracking-tighter transition-all">
                        Execute Emission (A4)
                    </button>
                    <button onclick="gerar('TERMICA')" class="w-full border border-cyan-800 text-cyan-600 hover:bg-cyan-900/20 py-3 rounded font-black uppercase text-[10px] transition-all">
                        Thermal Receipt (80mm)
                    </button>
                </div>
                
                <div class="p-4 bg-blue-900/20 border border-blue-500/30 rounded text-[9px] text-blue-400">
                    <p class="font-black mb-1">ISRAEL DEFENSE SYSTEMS NOTICE:</p>
                    <p>Documento assinado digitalmente seguindo os protocolos de criptografia assimétrica de Israel e padrões fiscais IOB 2026.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="print-area"></div>

    <script>
        function addLog(msg) {
            const t = document.getElementById('terminal');
            t.innerHTML += `> ${msg}<br>`;
            t.scrollTop = t.scrollHeight;
        }

        function calc2026() {
            const v = parseFloat(document.getElementById('prodValor').value) || 0;
            const cbs = v * 0.088; // Reforma 2026
            const ibs = v * 0.177;
            const liq = v - (cbs + ibs);

            document.getElementById('cbsVal').innerText = `R$ ${cbs.toFixed(2)}`;
            document.getElementById('ibsVal').innerText = `R$ ${ibs.toFixed(2)}`;
            document.getElementById('liqVal').innerText = `R$ ${liq.toFixed(2)}`;
            addLog(`Recalculating IBS/CBS for R$ ${v.toFixed(2)}... OK`);
        }

        function gerar(tipo) {
            const nome = document.getElementById('cliNome').value || "UNKNOWN TARGET";
            const doc = document.getElementById('cliDoc').value || "000.000.000-00";
            const valor = document.getElementById('prodValor').value || "0.00";
            
            addLog(`Generating ${tipo} Document... Signing via SHA-512...`);
            
            let html = `
                <div style="padding: 40px; color: black; background: white; font-family: 'JetBrains Mono', monospace;">
                    <div style="border-bottom: 10px solid #0038b8; padding-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
                        <h1 style="margin:0; font-size:40px;">V12 SENTINELA</h1>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Flag_of_Israel.svg/1200px-Flag_of_Israel.svg.png" style="height:40px;">
                    </div>
                    <div style="margin-top: 30px;">
                        <p><b>DOCUMENTO DE AUTORIDADE FISCAL - REFORMA 2026</b></p>
                        <p><b>ADQUIRENTE:</b> ${nome}</p>
                        <p><b>ID/DOC:</b> ${doc}</p>
                        <hr style="border: 1px solid black;">
                        <p style="font-size: 20px; text-align: right;"><b>VALOR TOTAL: R$ ${valor}</b></p>
                    </div>
                    <div style="margin-top: 100px; font-size: 10px; border: 1px dashed black; padding: 10px;">
                        ASSINATURA DIGITAL CRIPTOGRÁFICA: 0x${Math.random().toString(16).toUpperCase()}<br>
                        VERIFICADO VIA SISTEMA DE INTELIGÊNCIA SENTINELA V12
                    </div>
                </div>
            `;
            
            document.getElementById('print-area').innerHTML = html;
            window.print();
        }

        // Conectar ao Serpro Hardware
        setInterval(() => {
            const hw = document.getElementById('hwStatus');
            // Simulação de check de porta
            const socket = new WebSocket('wss://127.0.0.1:6515');
            socket.onopen = () => {
                hw.innerHTML = `<span class="w-2 h-2 bg-emerald-500 rounded-full"></span>SERPRO HARDWARE: CONNECTED`;
                hw.className = "text-[10px] text-emerald-500 flex items-center gap-2";
            };
        }, 5000);
    </script>
</body>
</html>
